import api, { route } from "@forge/api";
import ForgeUI, { render, AdminPage, Fragment, Text, Button } from '@forge/ui';

const App = () => {
    return (
        <Fragment>        
            <Button text="Click To Create Issue Type" onClick={async () => await execute()}/>
        </Fragment>
    );
};

async function execute() {
    var bodyData = `{
        "name": "DEMO FORGE ISSUE TYPE",
        "description": "From FORGE TEST",
        "type": "standard"
      }`; 
      
      const response = await api.asUser().requestJira(route`/rest/api/3/issuetype`, {
        method: 'POST',
        headers: {
          'Accept': 'application/json',
          'Content-Type': 'application/json'
        },
        body: bodyData
      });
    console.log("Issue Type")

  }

export const run = render(
    <AdminPage>
        <App />
    </AdminPage>
);
